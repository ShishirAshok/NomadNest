{"ast":null,"code":"var _s = $RefreshSig$();\nimport React, { useEffect } from 'react';\nimport { useValue } from '../context/ContextProvider';\nimport jwtDecode from 'jwt-decode';\nimport { storeRoom } from '../actions/room';\nimport { logout } from '../actions/user';\nconst useCheckToken = () => {\n  _s();\n  const {\n    state: {\n      currentUser,\n      location,\n      details,\n      images,\n      updatedRoom,\n      deletedImages,\n      addedImages\n    },\n    dispatch\n  } = useValue();\n  useEffect(() => {\n    if (currentUser) {\n      const decodedToken = jwtDecode(currentUser.token);\n      if (decodedToken.exp * 1000 < new Date().getTime()) {\n        storeRoom(location, details, images, updatedRoom, deletedImages, addedImages, currentUser.id);\n        logout(dispatch);\n      }\n    }\n  }, []);\n};\n_s(useCheckToken, \"PgfnxHXnBMKUj6nQJk4gHgLomYo=\", false, function () {\n  return [useValue];\n});\nexport default useCheckToken;","map":{"version":3,"names":["React","useEffect","useValue","jwtDecode","storeRoom","logout","useCheckToken","_s","state","currentUser","location","details","images","updatedRoom","deletedImages","addedImages","dispatch","decodedToken","token","exp","Date","getTime","id"],"sources":["C:/Users/shish/HostelProject/client/src/hooks/useCheckToken.js"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport { useValue } from '../context/ContextProvider';\r\nimport jwtDecode from 'jwt-decode';\r\nimport { storeRoom } from '../actions/room';\r\nimport { logout } from '../actions/user';\r\n\r\nconst useCheckToken = () => {\r\n  const {\r\n    state: {\r\n      currentUser,\r\n      location,\r\n      details,\r\n      images,\r\n      updatedRoom,\r\n      deletedImages,\r\n      addedImages,\r\n    },\r\n    dispatch,\r\n  } = useValue();\r\n  useEffect(() => {\r\n    if (currentUser) {\r\n      const decodedToken = jwtDecode(currentUser.token);\r\n      if (decodedToken.exp * 1000 < new Date().getTime()) {\r\n        storeRoom(\r\n          location,\r\n          details,\r\n          images,\r\n          updatedRoom,\r\n          deletedImages,\r\n          addedImages,\r\n          currentUser.id\r\n        );\r\n        logout(dispatch);\r\n      }\r\n    }\r\n  }, []);\r\n};\r\n\r\nexport default useCheckToken;\r\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AACxC,SAASC,QAAQ,QAAQ,4BAA4B;AACrD,OAAOC,SAAS,MAAM,YAAY;AAClC,SAASC,SAAS,QAAQ,iBAAiB;AAC3C,SAASC,MAAM,QAAQ,iBAAiB;AAExC,MAAMC,aAAa,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC1B,MAAM;IACJC,KAAK,EAAE;MACLC,WAAW;MACXC,QAAQ;MACRC,OAAO;MACPC,MAAM;MACNC,WAAW;MACXC,aAAa;MACbC;IACF,CAAC;IACDC;EACF,CAAC,GAAGd,QAAQ,CAAC,CAAC;EACdD,SAAS,CAAC,MAAM;IACd,IAAIQ,WAAW,EAAE;MACf,MAAMQ,YAAY,GAAGd,SAAS,CAACM,WAAW,CAACS,KAAK,CAAC;MACjD,IAAID,YAAY,CAACE,GAAG,GAAG,IAAI,GAAG,IAAIC,IAAI,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC,EAAE;QAClDjB,SAAS,CACPM,QAAQ,EACRC,OAAO,EACPC,MAAM,EACNC,WAAW,EACXC,aAAa,EACbC,WAAW,EACXN,WAAW,CAACa,EACd,CAAC;QACDjB,MAAM,CAACW,QAAQ,CAAC;MAClB;IACF;EACF,CAAC,EAAE,EAAE,CAAC;AACR,CAAC;AAACT,EAAA,CA9BID,aAAa;EAAA,QAYbJ,QAAQ;AAAA;AAoBd,eAAeI,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}