{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\shish\\\\HostelProject\\\\client\\\\src\\\\components\\\\user\\\\GoogleOneTap.js\",\n  _s = $RefreshSig$();\nimport { Google } from '@mui/icons-material';\nimport { Button } from '@mui/material';\nimport React, { useState } from 'react';\nimport { useValue } from '../../context/ContextProvider';\nimport jwtDecode from 'jwt-decode';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst GoogleOneTapLogin = () => {\n  _s();\n  const {\n    dispatch\n  } = useValue();\n  const [disabled, setDisabled] = useState(false);\n  const handleResponse = response => {\n    console.log(\"Response received \", response);\n    const token = response.credential;\n    const decodedToken = jwtDecode(token);\n    const {\n      sub: id,\n      email,\n      name,\n      picture: photoURL\n    } = decodedToken;\n    dispatch({\n      type: 'UPDATE_USER',\n      payload: {\n        id,\n        email,\n        name,\n        photoURL,\n        token,\n        google: true,\n        role: 'basic'\n      }\n    });\n    dispatch({\n      type: 'CLOSE_LOGIN'\n    });\n  };\n  const handleGoogleLogin = () => {\n    setDisabled(true);\n    console.log(process.env.REACT_APP_GOOGLE_CLIENT_ID);\n    try {\n      window.google.accounts.id.initialize({\n        client_id: process.env.REACT_APP_GOOGLE_CLIENT_ID,\n        callback: handleResponse\n      });\n      window.google.accounts.id.prompt(notification => {\n        if (notification.isNotDisplayed()) {\n          throw new Error('Try to clear the cookies or try again later!');\n        }\n        if (notification.isSkippedMoment() || notification.isDismissedMoment()) {\n          setDisabled(false);\n        }\n      });\n    } catch (error) {\n      dispatch({\n        type: 'UPDATE_ALERT',\n        payload: {\n          open: true,\n          severity: 'error',\n          message: error.message\n        }\n      });\n      console.log(error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Button, {\n    variant: \"outlined\",\n    startIcon: /*#__PURE__*/_jsxDEV(Google, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 18\n    }, this),\n    disabled: disabled,\n    onClick: handleGoogleLogin,\n    children: \"Login with Google\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 5\n  }, this);\n};\n_s(GoogleOneTapLogin, \"18ChwMKSsCQ87cdqlBaUpTAKGzc=\", false, function () {\n  return [useValue];\n});\n_c = GoogleOneTapLogin;\nexport default GoogleOneTapLogin;\nvar _c;\n$RefreshReg$(_c, \"GoogleOneTapLogin\");","map":{"version":3,"names":["Google","Button","React","useState","useValue","jwtDecode","jsxDEV","_jsxDEV","GoogleOneTapLogin","_s","dispatch","disabled","setDisabled","handleResponse","response","console","log","token","credential","decodedToken","sub","id","email","name","picture","photoURL","type","payload","google","role","handleGoogleLogin","process","env","REACT_APP_GOOGLE_CLIENT_ID","window","accounts","initialize","client_id","callback","prompt","notification","isNotDisplayed","Error","isSkippedMoment","isDismissedMoment","error","open","severity","message","variant","startIcon","fileName","_jsxFileName","lineNumber","columnNumber","onClick","children","_c","$RefreshReg$"],"sources":["C:/Users/shish/HostelProject/client/src/components/user/GoogleOneTap.js"],"sourcesContent":["import { Google } from '@mui/icons-material';\r\nimport { Button } from '@mui/material';\r\nimport React, { useState } from 'react';\r\nimport { useValue } from '../../context/ContextProvider';\r\nimport jwtDecode from 'jwt-decode';\r\n\r\nconst GoogleOneTapLogin = () => {\r\n  const { dispatch } = useValue();\r\n  const [disabled, setDisabled] = useState(false);\r\n\r\n  const handleResponse = (response) => {\r\n    console.log(\"Response received \",response);\r\n    const token = response.credential;\r\n    const decodedToken = jwtDecode(token);\r\n    const { sub: id, email, name, picture: photoURL } = decodedToken;\r\n    dispatch({\r\n      type: 'UPDATE_USER',\r\n      payload: {\r\n        id,\r\n        email,\r\n        name,\r\n        photoURL,\r\n        token,\r\n        google: true,\r\n        role: 'basic',\r\n      },\r\n    });\r\n    dispatch({ type: 'CLOSE_LOGIN' });\r\n  };\r\n  const handleGoogleLogin = () => {\r\n    setDisabled(true);\r\n    console.log(process.env.REACT_APP_GOOGLE_CLIENT_ID);\r\n    try {\r\n        \r\n      window.google.accounts.id.initialize({\r\n        client_id: process.env.REACT_APP_GOOGLE_CLIENT_ID,\r\n        \r\n        callback: handleResponse,\r\n      });\r\n      window.google.accounts.id.prompt((notification) => {\r\n        if (notification.isNotDisplayed()) {\r\n          throw new Error('Try to clear the cookies or try again later!');\r\n        }\r\n        if (\r\n          notification.isSkippedMoment() ||\r\n          notification.isDismissedMoment()\r\n        ) {\r\n          setDisabled(false);\r\n        }\r\n      });\r\n    } catch (error) {\r\n      dispatch({\r\n        type: 'UPDATE_ALERT',\r\n        payload: { open: true, severity: 'error', message: error.message },\r\n        \r\n      });\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n\r\n  return (\r\n    <Button\r\n      variant=\"outlined\"\r\n      startIcon={<Google />}\r\n      disabled={disabled}\r\n      onClick={handleGoogleLogin}\r\n    >\r\n      Login with Google\r\n    </Button>\r\n  );\r\n};\r\n\r\nexport default GoogleOneTapLogin;\r\n"],"mappings":";;AAAA,SAASA,MAAM,QAAQ,qBAAqB;AAC5C,SAASC,MAAM,QAAQ,eAAe;AACtC,OAAOC,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,SAASC,QAAQ,QAAQ,+BAA+B;AACxD,OAAOC,SAAS,MAAM,YAAY;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEnC,MAAMC,iBAAiB,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC9B,MAAM;IAAEC;EAAS,CAAC,GAAGN,QAAQ,CAAC,CAAC;EAC/B,MAAM,CAACO,QAAQ,EAAEC,WAAW,CAAC,GAAGT,QAAQ,CAAC,KAAK,CAAC;EAE/C,MAAMU,cAAc,GAAIC,QAAQ,IAAK;IACnCC,OAAO,CAACC,GAAG,CAAC,oBAAoB,EAACF,QAAQ,CAAC;IAC1C,MAAMG,KAAK,GAAGH,QAAQ,CAACI,UAAU;IACjC,MAAMC,YAAY,GAAGd,SAAS,CAACY,KAAK,CAAC;IACrC,MAAM;MAAEG,GAAG,EAAEC,EAAE;MAAEC,KAAK;MAAEC,IAAI;MAAEC,OAAO,EAAEC;IAAS,CAAC,GAAGN,YAAY;IAChET,QAAQ,CAAC;MACPgB,IAAI,EAAE,aAAa;MACnBC,OAAO,EAAE;QACPN,EAAE;QACFC,KAAK;QACLC,IAAI;QACJE,QAAQ;QACRR,KAAK;QACLW,MAAM,EAAE,IAAI;QACZC,IAAI,EAAE;MACR;IACF,CAAC,CAAC;IACFnB,QAAQ,CAAC;MAAEgB,IAAI,EAAE;IAAc,CAAC,CAAC;EACnC,CAAC;EACD,MAAMI,iBAAiB,GAAGA,CAAA,KAAM;IAC9BlB,WAAW,CAAC,IAAI,CAAC;IACjBG,OAAO,CAACC,GAAG,CAACe,OAAO,CAACC,GAAG,CAACC,0BAA0B,CAAC;IACnD,IAAI;MAEFC,MAAM,CAACN,MAAM,CAACO,QAAQ,CAACd,EAAE,CAACe,UAAU,CAAC;QACnCC,SAAS,EAAEN,OAAO,CAACC,GAAG,CAACC,0BAA0B;QAEjDK,QAAQ,EAAEzB;MACZ,CAAC,CAAC;MACFqB,MAAM,CAACN,MAAM,CAACO,QAAQ,CAACd,EAAE,CAACkB,MAAM,CAAEC,YAAY,IAAK;QACjD,IAAIA,YAAY,CAACC,cAAc,CAAC,CAAC,EAAE;UACjC,MAAM,IAAIC,KAAK,CAAC,8CAA8C,CAAC;QACjE;QACA,IACEF,YAAY,CAACG,eAAe,CAAC,CAAC,IAC9BH,YAAY,CAACI,iBAAiB,CAAC,CAAC,EAChC;UACAhC,WAAW,CAAC,KAAK,CAAC;QACpB;MACF,CAAC,CAAC;IACJ,CAAC,CAAC,OAAOiC,KAAK,EAAE;MACdnC,QAAQ,CAAC;QACPgB,IAAI,EAAE,cAAc;QACpBC,OAAO,EAAE;UAAEmB,IAAI,EAAE,IAAI;UAAEC,QAAQ,EAAE,OAAO;UAAEC,OAAO,EAAEH,KAAK,CAACG;QAAQ;MAEnE,CAAC,CAAC;MACFjC,OAAO,CAACC,GAAG,CAAC6B,KAAK,CAAC;IACpB;EACF,CAAC;EAGD,oBACEtC,OAAA,CAACN,MAAM;IACLgD,OAAO,EAAC,UAAU;IAClBC,SAAS,eAAE3C,OAAA,CAACP,MAAM;MAAAmD,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAE;IACtB3C,QAAQ,EAAEA,QAAS;IACnB4C,OAAO,EAAEzB,iBAAkB;IAAA0B,QAAA,EAC5B;EAED;IAAAL,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAQ,CAAC;AAEb,CAAC;AAAC7C,EAAA,CAjEID,iBAAiB;EAAA,QACAJ,QAAQ;AAAA;AAAAqD,EAAA,GADzBjD,iBAAiB;AAmEvB,eAAeA,iBAAiB;AAAC,IAAAiD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}