{"ast":null,"code":"import fetchData from './fetchData';\nimport { v4 as uuidv4 } from 'uuid';\nconst url = process.env.REACT_APP_SERVER_URL + '/user';\nexport const register = async (user, dispatch) => {\n  dispatch({\n    type: 'START_LOADING'\n  });\n  const result = await fetchData({\n    url: url + '/register',\n    body: user\n  }, dispatch);\n  if (result) {\n    dispatch({\n      type: 'UPDATE_USER',\n      payload: result\n    });\n    dispatch({\n      type: 'CLOSE_LOGIN'\n    });\n    dispatch({\n      type: 'UPDATE_ALERT',\n      payload: {\n        open: true,\n        severity: 'success',\n        message: 'Your account has been created successfully'\n      }\n    });\n  }\n  dispatch({\n    type: 'END_LOADING'\n  });\n};\nexport const login = async (user, dispatch) => {\n  dispatch({\n    type: 'START_LOADING'\n  });\n  const result = await fetchData({\n    url: url + '/login',\n    body: user\n  }, dispatch);\n  if (result) {\n    dispatch({\n      type: 'UPDATE_USER',\n      payload: result\n    });\n    dispatch({\n      type: 'CLOSE_LOGIN'\n    });\n  }\n  dispatch({\n    type: 'END_LOADING'\n  });\n};\nexport const updateProfile = async (currentUser, updatedFields, dispatch) => {\n  dispatch({\n    type: 'START_LOADING'\n  });\n  const {\n    name,\n    file\n  } = updatedFields;\n  let body = {\n    name\n  };\n  try {\n    if (file) {\n      var _file$name, _file$name$split;\n      const imageName = uuidv4() + '.' + (file === null || file === void 0 ? void 0 : (_file$name = file.name) === null || _file$name === void 0 ? void 0 : (_file$name$split = _file$name.split('.')) === null || _file$name$split === void 0 ? void 0 : _file$name$split.pop());\n      const photoURL = await uploadFile(file, `profile/${currentUser === null || currentUser === void 0 ? void 0 : currentUser.id}/${imageName}`);\n      body = {\n        ...body,\n        photoURL\n      };\n    }\n    const result = await fetchData({\n      url: url + '/updateProfile',\n      method: 'PATCH',\n      body,\n      token: currentUser.token\n    }, dispatch);\n    if (result) {\n      dispatch({\n        type: 'UPDATE_USER',\n        payload: {\n          ...currentUser,\n          ...result\n        }\n      });\n      dispatch({\n        type: 'UPDATE_ALERT',\n        payload: {\n          open: true,\n          severity: 'success',\n          message: 'Your profile has been updated successfully'\n        }\n      });\n      dispatch({\n        type: 'UPDATE_PROFILE',\n        payload: {\n          open: false,\n          file: null,\n          photoURL: result.photoURL\n        }\n      });\n    }\n  } catch (error) {\n    dispatch({\n      type: 'UPDATE_ALERT',\n      payload: {\n        open: true,\n        severity: 'error',\n        message: error.message\n      }\n    });\n    console.log(error);\n  }\n  dispatch({\n    type: 'END_LOADING'\n  });\n};\nexport const getUsers = async (dispatch, currentUser) => {\n  const result = await fetchData({\n    url,\n    method: 'GET',\n    token: currentUser.token\n  }, dispatch);\n  if (result) {\n    dispatch({\n      type: 'UPDATE_USERS',\n      payload: result\n    });\n  }\n};\nexport const updateStatus = (updatedFields, userId, dispatch, currentUser) => {\n  return fetchData({\n    url: `${url}/updateStatus/${userId}`,\n    method: 'PATCH',\n    token: currentUser.token,\n    body: updatedFields\n  }, dispatch);\n};\nexport const logout = dispatch => {\n  dispatch({\n    type: 'UPDATE_USER',\n    payload: null\n  });\n  dispatch({\n    type: 'RESET_ROOM'\n  });\n  dispatch({\n    type: 'UPDATE_USERS',\n    payload: []\n  });\n};","map":{"version":3,"names":["fetchData","v4","uuidv4","url","process","env","REACT_APP_SERVER_URL","register","user","dispatch","type","result","body","payload","open","severity","message","login","updateProfile","currentUser","updatedFields","name","file","_file$name","_file$name$split","imageName","split","pop","photoURL","uploadFile","id","method","token","error","console","log","getUsers","updateStatus","userId","logout"],"sources":["C:/Users/shish/HostelProject/client/src/actions/Users.js"],"sourcesContent":["import fetchData from './fetchData';\r\nimport { v4 as uuidv4 } from 'uuid';\r\n\r\nconst url = process.env.REACT_APP_SERVER_URL + '/user';\r\n\r\nexport const register = async (user, dispatch) => {\r\n  dispatch({ type: 'START_LOADING' });\r\n\r\n  const result = await fetchData(\r\n    { url: url + '/register', body: user },\r\n    dispatch\r\n  );\r\n  if (result) {\r\n    dispatch({ type: 'UPDATE_USER', payload: result });\r\n    dispatch({ type: 'CLOSE_LOGIN' });\r\n    dispatch({\r\n      type: 'UPDATE_ALERT',\r\n      payload: {\r\n        open: true,\r\n        severity: 'success',\r\n        message: 'Your account has been created successfully',\r\n      },\r\n    });\r\n  }\r\n\r\n  dispatch({ type: 'END_LOADING' });\r\n};\r\n\r\nexport const login = async (user, dispatch) => {\r\n  dispatch({ type: 'START_LOADING' });\r\n\r\n  const result = await fetchData({ url: url + '/login', body: user }, dispatch);\r\n  if (result) {\r\n    dispatch({ type: 'UPDATE_USER', payload: result });\r\n    dispatch({ type: 'CLOSE_LOGIN' });\r\n  }\r\n\r\n  dispatch({ type: 'END_LOADING' });\r\n};\r\n\r\nexport const updateProfile = async (currentUser, updatedFields, dispatch) => {\r\n  dispatch({ type: 'START_LOADING' });\r\n\r\n  const { name, file } = updatedFields;\r\n  let body = { name };\r\n  try {\r\n    if (file) {\r\n      const imageName = uuidv4() + '.' + file?.name?.split('.')?.pop();\r\n      const photoURL = await uploadFile(\r\n        file,\r\n        `profile/${currentUser?.id}/${imageName}`\r\n      );\r\n      body = { ...body, photoURL };\r\n    }\r\n    const result = await fetchData(\r\n      {\r\n        url: url + '/updateProfile',\r\n        method: 'PATCH',\r\n        body,\r\n        token: currentUser.token,\r\n      },\r\n      dispatch\r\n    );\r\n    if (result) {\r\n      dispatch({ type: 'UPDATE_USER', payload: { ...currentUser, ...result } });\r\n      dispatch({\r\n        type: 'UPDATE_ALERT',\r\n        payload: {\r\n          open: true,\r\n          severity: 'success',\r\n          message: 'Your profile has been updated successfully',\r\n        },\r\n      });\r\n      dispatch({\r\n        type: 'UPDATE_PROFILE',\r\n        payload: { open: false, file: null, photoURL: result.photoURL },\r\n      });\r\n    }\r\n  } catch (error) {\r\n    dispatch({\r\n      type: 'UPDATE_ALERT',\r\n      payload: {\r\n        open: true,\r\n        severity: 'error',\r\n        message: error.message,\r\n      },\r\n    });\r\n    console.log(error);\r\n  }\r\n\r\n  dispatch({ type: 'END_LOADING' });\r\n};\r\n\r\nexport const getUsers = async (dispatch, currentUser) => {\r\n  const result = await fetchData(\r\n    { url, method: 'GET', token: currentUser.token },\r\n    dispatch\r\n  );\r\n  if (result) {\r\n    dispatch({ type: 'UPDATE_USERS', payload: result });\r\n  }\r\n};\r\n\r\nexport const updateStatus = (updatedFields, userId, dispatch, currentUser) => {\r\n  return fetchData(\r\n    {\r\n      url: `${url}/updateStatus/${userId}`,\r\n      method: 'PATCH',\r\n      token: currentUser.token,\r\n      body: updatedFields,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport const logout = (dispatch) => {\r\n  dispatch({ type: 'UPDATE_USER', payload: null });\r\n  dispatch({ type: 'RESET_ROOM' });\r\n  dispatch({ type: 'UPDATE_USERS', payload: [] });\r\n};\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}