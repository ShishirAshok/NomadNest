{"ast":null,"code":"var _s = $RefreshSig$();\nimport React, { useEffect } from 'react';\nimport { useValue } from '../context/ContextProvider';\nimport jwtDecode from 'jwt-decode';\n// import { storeRoom } from '../actions/room';\n// import { logout } from '../actions/user';\n\nconst useCheckToken = () => {\n  _s();\n  const {\n    state: {\n      currentUser,\n      location,\n      details,\n      images,\n      updatedRoom,\n      deletedImages,\n      addedImages\n    },\n    dispatch\n  } = useValue();\n  useEffect(() => {\n    if (currentUser) {\n      const decodedToken = jwtDecode(currentUser.token);\n      if (decodedToken.exp * 1000 < new Date().getTime()) {\n        storeRoom(location, details, images, updatedRoom, deletedImages, addedImages, currentUser.id);\n        logout(dispatch);\n      }\n    }\n  }, []);\n};\n_s(useCheckToken, \"PgfnxHXnBMKUj6nQJk4gHgLomYo=\", false, function () {\n  return [useValue];\n});\nexport default useCheckToken;","map":{"version":3,"names":["React","useEffect","useValue","jwtDecode","useCheckToken","_s","state","currentUser","location","details","images","updatedRoom","deletedImages","addedImages","dispatch","decodedToken","token","exp","Date","getTime","storeRoom","id","logout"],"sources":["C:/Users/shish/HostelProject/client/src/hooks/UseCheckToken.js"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport { useValue } from '../context/ContextProvider';\r\nimport jwtDecode from 'jwt-decode';\r\n// import { storeRoom } from '../actions/room';\r\n// import { logout } from '../actions/user';\r\n\r\nconst useCheckToken = () => {\r\n  const {\r\n    state: {\r\n      currentUser,\r\n      location,\r\n      details,\r\n      images,\r\n      updatedRoom,\r\n      deletedImages,\r\n      addedImages,\r\n    },\r\n    dispatch,\r\n  } = useValue();\r\n\r\n\r\n  useEffect(() => {\r\n    if (currentUser) {\r\n      const decodedToken = jwtDecode(currentUser.token);\r\n      if (decodedToken.exp * 1000 < new Date().getTime()) {\r\n        storeRoom(\r\n          location,\r\n          details,\r\n          images,\r\n          updatedRoom,\r\n          deletedImages,\r\n          addedImages,\r\n          currentUser.id\r\n        );\r\n        logout(dispatch);\r\n      }\r\n    }\r\n  }, []);\r\n};\r\n\r\nexport default useCheckToken;\r\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AACxC,SAASC,QAAQ,QAAQ,4BAA4B;AACrD,OAAOC,SAAS,MAAM,YAAY;AAClC;AACA;;AAEA,MAAMC,aAAa,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC1B,MAAM;IACJC,KAAK,EAAE;MACLC,WAAW;MACXC,QAAQ;MACRC,OAAO;MACPC,MAAM;MACNC,WAAW;MACXC,aAAa;MACbC;IACF,CAAC;IACDC;EACF,CAAC,GAAGZ,QAAQ,CAAC,CAAC;EAGdD,SAAS,CAAC,MAAM;IACd,IAAIM,WAAW,EAAE;MACf,MAAMQ,YAAY,GAAGZ,SAAS,CAACI,WAAW,CAACS,KAAK,CAAC;MACjD,IAAID,YAAY,CAACE,GAAG,GAAG,IAAI,GAAG,IAAIC,IAAI,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC,EAAE;QAClDC,SAAS,CACPZ,QAAQ,EACRC,OAAO,EACPC,MAAM,EACNC,WAAW,EACXC,aAAa,EACbC,WAAW,EACXN,WAAW,CAACc,EACd,CAAC;QACDC,MAAM,CAACR,QAAQ,CAAC;MAClB;IACF;EACF,CAAC,EAAE,EAAE,CAAC;AACR,CAAC;AAACT,EAAA,CAhCID,aAAa;EAAA,QAYbF,QAAQ;AAAA;AAsBd,eAAeE,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}